[tox]
envlist =
    py27,
    pep8,
    pylint,
    coverage

[testenv]
deps = -rrequirements-dev.txt
commands =
    python setup.py develop
    nosetests --with-flaky --exclude=pytest
    py.test test/test_pytest_example.py
    py.test -p no:flaky test/test_flaky_pytest_plugin.py

[testenv:pep8]
commands =
    pep8 box
    pep8 test

[testenv:pylint]
commands =
    python setup.py install
    pylint --rcfile=.pylintrc box
    pylint --rcfile=.pylintrc test

[testenv:coverage]
commands =
    python setup.py develop
    nosetests --with-flaky --with-coverage --exclude=pytest
    py.test test/test_pytest_example.py
    py.test -p no:flaky test/test_flaky_pytest_plugin.py

[pep8]
show-pep8 = True
show-source = True
